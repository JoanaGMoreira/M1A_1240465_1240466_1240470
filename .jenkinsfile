pipeline {
    agent any

      stages {
//         stage('Clean') {
//             steps {
//                 echo 'Cleaning /target..'
//                 sh 'mvn clean'
//             }
//         }
//          stage('Unit Tests') {
//              steps {
//                  echo 'Running Unit Tests..'
//                  sh 'mvn test'
//              }
//          }
//         stage('Mutation Tests') {
//              steps {
//                  echo 'Running Mutation Tests..'
//                  sh 'mvn org.pitest:pitest-maven:mutationCoverage'
//              }
//         }
//         stage('Integration Tests') {
//              steps {
//                  echo 'Running Integration Tests..'
//                  sh 'mvn verify'
//              }
//         }
//         stage('Deploy') {
//             steps {
//                 echo 'Deploying....'
//                 sh 'mvn install -DskipTests'
//             }
//         }
//         stage('Build docker image') {
//             steps {
//                 echo 'Building docker image....'
//                 sh 'docker build -t lms .'
//             }
//         }
//         stage('Build docker container') {
//             steps {
//                 echo 'Building docker container....'
//                 sh 'docker-compose up -d'
//             }
//         }

            stage('Build docker container') {
                steps {
                    echo 'Building docker container....'
                    sh 'ls -la target'
                    sh 'ls -la target/pit-reports'
                }
            }
    }
    post {
        always {
            // Archive JUnit test results
            junit 'target/surefire-reports/*.xml'
            junit 'target/failsafe-reports/*.xml'
            publishHTML (target : [allowMissing: false,
             alwaysLinkToLastBuild: true,
             keepAll: true,
             reportDir: 'target/pit-reports',
             reportFiles: 'index.html',
             reportName: 'Mutation Test Report',
             reportTitles: 'Mutation Test Report'])
        }
    }
}
